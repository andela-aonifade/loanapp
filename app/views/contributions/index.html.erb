<section class="main-content">
  <div class="container">
    <h2 class="page-title">My Contributions</h2>
    <div class="card">
      <div class="card-body p-lg">
      
        <form action="" id="profile-form">
          <div class="row">
            <div class="col-md-6">
                      
              <section class="profile-content">
                <h5 class="primary-header">Summary </h5>
                <table class="table money-content">
                  <tbody>
                    <tr>
                      <td>Total Contributions</td>
                      <td class="text-right"><strong>&#8358; <%= to_currency(@total_contribution) %></strong></td>
                    </tr>
                    <tr>
                      <td>Monthly Contribution</td>
                      <td class="text-right">&#8358; <%= to_currency(@monthly_contribution) %></td>
                    </tr>
                    <tr>
                      <td>Duration of contribution till date</td>
                      <td class="text-right"><%= @contribution_duration %> Months</td>
                    </tr>
                  </tbody>
                </table>
                <% if @contribution.nil? %>
                  <%= link_to new_contribution_path(), class: "btn btn-success" do %>
                    <span class="fa fa-plus"></span> Add
                  <% end %>
                <% else %>
                  <%= link_to edit_contribution_path(@contribution.id), class: "btn btn-primary" do %>
                    <span class="fa fa-edit"></span> Review
                  <% end %> 
                  
                  <%= link_to contribution_path(@contribution.id), class: "btn btn-danger" do %>
                    <span class="fa fa-trash"></span> Remove
                  <% end %> 
                <% end %>
              </section>
              <div class="alert alert-danger" role="alert">
                <strong>Note: </strong> If you are reviewing your monthly contribution, you can only review upward i.e. your new contribution must be higher than your current contribution.
              </div>
            </div>

            <div class="col-md-6">
              <div class="row">
                <div class="col-sm-12">
                  <h5 class="primary-header">Recent Contributions </h5>
                    <% if @recent_contributions.empty? %>
                      <div>You do not have any contribution</div>
                    <% else %>
                      <table class="table table-striped table-money">
                        <thead>
                          <tr>
                            <th class="text-center" width="15%">#</th>
                            <th width="55%">Date</th>
                            <th class="text-center" width="30%">Amount</th>
                          </tr>
                        </thead>
                      </table>
                      <div class="table-money-holder">
                        <table class="table table-striped table-money">
                          <tbody>
                            <% @recent_contributions.each_with_index do |rc, index| %>
                              <tr>
                                <th scope="row" class="text-center" width="15%"><%= index + 1 %></th>
                                <td width="55%"><%= rc[:created_at] %></td>
                                <td class="text-center" width="30%"><%= to_currency(rc[:amount]) %></td>
                              </tr>
                            <% end %>
                          </tbody>
                        </table>
                      </div>
                      <table class="table table-striped table-money">
                        <thead>
                          <tr>
                            <th width="70%" colspan="2">Total</th>
                            <th class="text-center" width="30%">&#8358; <%= to_currency(@total_contribution) %></th>
                          </tr>
                        </thead>
                      </table>
                   <% end %>
                </div>
              </div>
            </div>

          </div>
        </form>
      </div>
    </div>
  </div>

</section>

