<section class="main-content">
  <div class="container">
    <h2 class="page-title">Add New Contribution</h2>
    <div class="card">
      <div class="card-body p-lg">
        <div class="row">
          <div class="col-md-6">
                    
            <section class="profile-content">
              <% if @error %>
                <div class="col-md-6 alert alert-danger" role="alert"><%= @error %></div>
              <% end %>
              <h5 class="primary-header">New Contribution </h5>
              <%= form_with url: admin_new_monthly_contribution_path, model: @monthly_contribution, id: 'contribution_form' do |f|%>
                <table class="table money-content">
                  <tbody>
                    <tr>
                      <td>Select Contributor</td>
                      <td class="text-right">
                        <%= f.select(:profile_id, @profile.collect {|p| [ p.firstname + " " + p.lastname, p.id ] }, { 
                          include_blank: "Select Contributor" }, id: "profile_id", class: "custom-select form-control", required: "required") %>
                      </td>
                    </tr>
                    <tr>
                      <td>Amount in &#8358;</td>
                      <td class="text-right">
                        <%= f.text_field :amount, id: "contribution-amount", class: 'form-control', placeholder: "Amount" %>
                      </td>
                    </tr>
                    <tr>
                      <td>Month</td>
                      <td class="text-right">
                        <%= f.select(:month, ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
                          { include_blank: "Month" }, id: "month", class: "custom-select form-control", required: "required")
                        %>
                      </td>
                    </tr>
                    <tr>
                      <td>Year</td>
                      <td>
                        <%= f.select(:year, (Time.zone.now.year - 100)..(Time.zone.now.year + 1), { include_blank: "Year" },
                          id: "year", class: "custom-select form-control select2", required: "required")
                        %>
                      </td>
                    </tr>
                    <tr>
                      <td colspan=2 align="center">
                        <div class="col-sm-12">
                          <%= f.submit "Save Contribution", class:"btn btn-secondary btn-lg" %>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              <% end %>
            </section>
          </div>

          <div class="col-md-6">
            <div class="row">
              <div class="col-sm-12">
                <h5 class="primary-header">All Contributions </h5>
                <table class="table table-striped table-money">
                  <thead>
                    <tr>
                      <th class="text-center" width="15%">#</th>
                      <th width="55%">Date</th>
                      <th class="text-center" width="30%">Amount</th>
                    </tr>
                  </thead>
                </table>
                <div class="table-money-holder">
                  <table class="table table-striped table-money">
                    <tbody>
                      <% @recent_contributions.each_with_index do |contribution, index| %>
                        <tr>
                          <th scope="row" class="text-center" width="15%"><%= index+1 %></th>
                          <td width="55%"><%= contribution.month %> <%= contribution.year %></td>
                          <td class="text-center" width="30%"><%= contribution.amount %></td>
                        </tr>
                      <% end %>
                    </tbody>
                  </table>
                </div>
                <table class="table table-striped table-money">
                  <thead>
                    <tr>
                      <th width="70%" colspan="2">Total</th>
                      <th class="text-center" width="30%"><%= @total_contribution %></th>
                    </tr>
                  </thead>
                </table>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>